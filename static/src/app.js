import React from "react";
import Attributes from "./components/Attributes/Attributes";
import Attribute from "./components/Attributes/Attribute/Attribute";

import Aux from "./hoc/Aux/Aux";

class App extends React.Component {
  constructor() {
    super();
    this.state = {
      rolls: [],
      rollRequest: false
    };
  }

  getAttributeValues() {
    if (this.state.rollRequest) return;

    this.setState({
      rollRequest: true
    });

    // reset rolls on every request
    const emptyRolls = this.state.rolls.splice(0, this.state.rolls.length);
    this.setState({
      rolls: emptyRolls
    });

    for (let i = 0; i < 6; i++) {
      let new_roll_value = this.state.rolls;
      new_roll_value.push(Attribute());
      this.setState({
        rolls: new_roll_value
      });
    }

    this.setState({
      rollRequest: false
    });
  }

  render() {
    return (
      <Aux>
        <h2>Dungeons and Dragons Ability Score Generator</h2>
        <p>
          This can be used to generate ability scores for new characters. Scores
          are generated by 4d6 and dropping the lowest roll
        </p>
        <button onClick={() => this.getAttributeValues()}>Click</button>
        <Attributes rolls={this.state.rolls} />
      </Aux>
    );
  }
}

export default App;
